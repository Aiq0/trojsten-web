{% load utils %}
<table class="table">
<thead>
<tr>
    <th>
        #
    </th>
    <th>
        Úloha
    </th>
    <th>
        Kategória
    </th>
    <th>
        Max. body
    </th>
    {% if user.is_authenticated %}
    <th>
        Tvoje body
    </th>
    {% endif %}
</tr>
</thead>
{% for task in tasks %}
    <tr>
        <td>
            {{task.number}}.
        </td>
        <td>
        {% if task.task_file_exists %}
            <a href="{% url 'task_statement' task_id=task.id %}">{{task.name}}</a>
        {% else %}
            {{task.name}}
        {% endif %}
        </td>
        <td>
            {% for category in task.category.all %}
                <span class="label label-default category-{{category}}">{{category}}</span>
            {% endfor %}
        </td>
        <td>
            {% if task.description_points > 0 %}
                <span class="points-item">popis: {{task.description_points}}</span>
                {% if task.source_points > 0 %}<br/>{% endif %}
            {% endif %}
            {% if task.source_points > 0 %}
                <span class="points-item">program: {{task.source_points}}</span>
            {% endif %}
        </td>
        {% if user.is_authenticated %}
        <td>
            {% if task.description_points > 0 %}
                <span class="points-item">popis: {{points|lookup:task|lookup:'description'}}</span>
                {% if task.source_points > 0 %}<br/>{% endif %}
            {% endif %}
            {% if task.source_points > 0 %}
                <span class="points-item">program: {{points|lookup:task|lookup:'source'}}</span>
            {% endif %}
        </td>
        {% endif %}
    </tr>
{% empty %}
    <tr>
        <td colspan="4">Žiadne úlohy</td>
    </tr>
{% endfor %}
</table>
