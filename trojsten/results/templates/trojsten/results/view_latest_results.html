{% extends "trojsten/layout/main.html" %}
{% load results_parts archive_parts%}
{% load utils %}

{% block title %}Aktuálne výsledky{% endblock %}

{% block page_header %}
<h1>Aktuálne výsledky</h1>
{% endblock %}

{% block page_content %}
<!-- Nav tabs -->
<ul class="nav nav-tabs" role="tablist">
{% for round, categories in rounds_info %}
    {% if categories|length > 1 %}
        {% for category in categories %}
            {% if category != None %}
                <li {% if forloop.parentloop.counter == 1 and forloop.counter == 2 %}class="active"{% endif %}>
                    <a href="#category-tab-{{ round.id }}-{{ category.id }}" role="tab"
                       data-toggle="tab">
                        {{ category }}
                    </a>
                </li>
            {% endif %}
        {% endfor %}
    {% else %}
        <li {% if forloop.counter == 1 %}class="active"{% endif %}>
            <a href="#category-tab-{{ round.id }}" role="tab" data-toggle="tab">
                {{ round.series.competition }}
            </a>
        </li>
    {% endif %}
{% endfor %}
</ul>
<!-- Tab panes -->
<div class="tab-content">
{% for round, categories in rounds_info %}
    {% if categories|length > 1 %}
        {% for category in categories %}
            <div class="tab-pane fade{% if forloop.parentloop.counter == 1 and forloop.counter == 2 %} in active{% endif %}"
                 id="category-tab-{{ round.id }}-{{ category.id }}">
                {% if category != None %}
                    {% is_frozen round single_round as results_are_final %}
                    {% if not results_are_final %}
                        <div class="alert alert-warning">Výsledky sú predbežné.</div>
                    {% endif %}
                    {% show_results_table round=round category=category %}
                {% endif %}
            </div>
        {% endfor %}
    {% else %}
        <div class="tab-pane fade{% if forloop.counter == 1 %} in active{% endif %}"
             id="category-tab-{{ round.id }}">
            <div class="alert alert-warning">Výsledky sú predbežné.</div>
            {% show_results_table round=round %}
        </div>
    {% endif %}
{% endfor %}
</div>

{% include 'trojsten/results/parts/buttons.html' %}
<h2>Vysvetlivky</h2>
{% include 'trojsten/results/parts/legend.html' %}

{% show_archive %}

{% endblock %}
