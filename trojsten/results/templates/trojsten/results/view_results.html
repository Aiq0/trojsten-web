{% extends "trojsten/layout/main.html" %}
{% load utils %}
{% block page_content %}
<table class="table table-hover table-responsive">
<tr>
    <th>#</th>
    <th>Meno:</th>
    {% for task in tasks %}
        <th>{{task.number}}</th>
    {% endfor %}
    <th>Suma:</th>
</tr>
{% for result in results %}
{% spaceless %}
<tr>
    <td>{{forloop.counter}}</td>
    <td>{{result.person.name}} {{result.person.surname}}</td>
    {% for task in tasks %}
        <td>
        <span data-toggle="tooltip" data-placement="top" title="{% for type in task.task_type|split:',' %}{% if not forloop.first %} {% endif %}{{type|first}}:{{result.points|lookup:task|lookup:type|default:0}}{% endfor %}">
            {{result.points|lookup:task|lookup:"sum"}}
        </span>
        </td>
    {% endfor %}

    <td>{{result.sum}}</td>
</tr>
{% endspaceless %}
{% empty %}
<tr><td colspan="{{tasks | length | add:3}}">Å½iadne submity</td></tr>
{% endfor %}
</table>
{% endblock %}
